# AI对话人生游戏 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
**产品名称：** /self - AI对话人生模拟器  
**产品类型：** AI驱动的对话式人生模拟游戏  
**目标用户：** 喜欢自我探索、情感疗愈、哲学思考的用户  
**核心价值：** 通过AI对话模拟人生经历，动态评估人格发展，提供自我认知和成长体验

### 1.2 核心理念
- **对话驱动：** 所有游戏内容通过自然语言对话展开
- **人格建模：** 基于五大人格模型(OCEAN)动态评估用户性格发展
- **技能系统：** AI返回特定技能命令，模拟人生行为
- **选择导向：** 每次对话AI提供A/B选择，影响故事走向
- **本地存储：** 完整记录对话历史和人格变化，确保连贯性

---

## 2. 核心功能设计

### 2.1 基础命令系统

#### 必需命令（游戏启动时解锁）
- **`/start`** - 开始新的人生旅程
- **`/save`** - 保存当前游戏状态
- **`/exit`** - 退出游戏
- **`/mirror`** - 查看当前角色状态（ASCII艺术展示）

#### 可选命令（根据游戏进程解锁）
- **`/status`** - 查看人格特质详情
- **`/history`** - 查看对话历史
- **`/help`** - 显示可用命令

### 2.2 AI技能命令生成系统

AI在对话中会智能生成技能命令，用 `"/" + "操作"` 格式表示。系统通过以下prompt指导AI生成命令：

#### AI命令生成Prompt
```
你是一个人生模拟游戏的AI助手。在每次对话回复中，根据以下规则生成技能命令：

1. 命令格式：使用 "/" + 动词 的格式，如 /eat, /sleep, /cry

2. 生成原则：
   - 根据当前对话情境和用户选择生成相关命令
   - 考虑用户当前的人格特质和情感状态
   - 命令应该反映用户在当前情境下的自然反应
   - 每次回复最多生成一个命令，也可以不生成命令
   - 命令应该是简单、直观、符合人类自然行为
   - 可以创造任何符合情境的新命令，不要局限于特定词汇

3. 命令特点：
   - 可以是任何人类行为或情感表达
   - 可以是身体动作、心理状态、社交行为等
   - 可以是抽象概念的具体化表达
   - 保持命令的简洁性和可理解性

请根据当前对话内容，自由生成一个合适的技能命令（可选）。不要被任何预定义的命令列表限制，发挥你的创造力。
```

### 2.3 人格评估系统

基于五大人格模型(OCEAN)进行动态评分：

#### 人格维度
1. **开放性 (Openness)** - 好奇心、创造力、接受新事物
2. **尽责性 (Conscientiousness)** - 自律、计划性、可靠性
3. **外向性 (Extraversion)** - 社交性、活力、表达力
4. **宜人性 (Agreeableness)** - 友善、合作、同理心
5. **情绪稳定性 (Neuroticism)** - 情绪控制、压力应对

#### 评分机制
- 初始值：每个维度50分（中性）
- 变化范围：每次对话-10到+10分，精度为1分
- 总分范围：0-100分
- 评估频率：每次对话后更新
- 精度要求：所有变化值必须精确到个位数

---

## 3. 游戏流程设计

### 3.1 游戏启动流程
```
1. 用户启动应用
2. 显示终端界面
3. 用户输入 /start
4. AI生成出生场景描述，包含：
   - 详细的出生环境和氛围
   - 具体的出生时间和日期
   - 初始人格特质设定
   - 第一个人生选择（A/B选项）
5. 开始人生对话循环
```

### 3.2 出生场景生成Prompt
```
你是一个人生模拟游戏的AI助手。当用户输入 /start 命令时，你需要生成一个详细的出生场景。

请按照以下格式生成回复：

1. 场景描述：
   - 描述出生的具体环境（医院、家里、特殊地点等）
   - 描述周围的人物（医生、护士、家人等）
   - 描述当时的氛围和情感
   - 描述婴儿的初始状态和反应

2. 时间信息：
   - 具体的出生日期（年月日）
   - 出生时间（时分）
   - 游戏时间自动推进机制（每次对话后时间自动流逝）

3. 初始人格设定：
   - 基于出生环境设定初始人格特质
   - 每个维度给出合理的初始值（0-100）

4. 第一个选择：
   - 提供A/B两个选择，反映婴儿的初始反应
   - 每个选择对应不同的人格特质影响

回复格式：
{
  "message": "详细的出生场景描述，包含时间日期信息",
  "birthInfo": {
    "date": "YYYY-MM-DD",
    "time": "HH:MM",
    "location": "出生地点"
  },
  "currentAge": 0,
  "ageStage": "baby",
  "choices": [
    {
      "id": "A",
      "text": "选择A的描述",
      "consequence": "选择A的后果",
      "personalityChange": {
        "openness": 数值变化(-10到+10，精度为1),
        "conscientiousness": 数值变化,
        "extraversion": 数值变化,
        "agreeableness": 数值变化,
        "neuroticism": 数值变化
      }
    },
    {
      "id": "B",
      "text": "选择B的描述", 
      "consequence": "选择B的后果",
      "personalityChange": {
        "openness": 数值变化(-10到+10，精度为1),
        "conscientiousness": 数值变化,
        "extraversion": 数值变化,
        "agreeableness": 数值变化,
        "neuroticism": 数值变化
      }
    }
  ],
  "userProfileUpdates": {
    "currentAge": 0,
    "ageStage": "baby",
    "personalityTraits": {
      "openness": 初始值,
      "conscientiousness": 初始值,
      "extraversion": 初始值,
      "agreeableness": 初始值,
      "neuroticism": 初始值
    }
  },
  "skillCommand": "可选的技能命令，如 /cry 或 /sleep"
}
```

### 3.3 对话循环
```
1. AI描述当前情境（包含当前时间日期）
2. AI提供A/B两个选择
3. 用户做出选择
4. AI根据选择生成新情境
5. AI可能返回技能命令
6. 更新人格评分（精确到1分）
7. 时间自动推进（根据对话内容决定推进时长）
8. 继续下一轮对话
```

### 3.4 数据存储结构

#### 用户档案
```json
{
  "personalityTraits": {
    "openness": 50,
    "conscientiousness": 50,
    "extraversion": 50,
    "agreeableness": 50,
    "neuroticism": 50
  },
  "birthInfo": {
    "date": "2024-01-01",
    "time": "08:30",
    "location": "城市医院"
  },
  "currentTime": {
    "date": "2024-01-01",
    "time": "08:30",
    "age": 0
  },
  "conversationHistory": [],
  "skillCommands": [],
  "lifeEvents": [],
  "currentAge": 0,
  "gameSession": {
    "startTime": "2024-01-01T00:00:00Z",
    "totalConversations": 0
  }
}
```

#### 对话记录
```json
{
  "id": "unique_id",
  "timestamp": "2024-01-01T00:00:00Z",
  "userInput": "用户输入内容",
  "aiResponse": "AI回复内容",
  "userChoice": "A" | "B",
  "skillCommand": "/eat",
  "personalityChanges": {
    "openness": 3,
    "extraversion": -2
  },
  "timeProgression": {
    "fromDate": "2024-01-01",
    "fromTime": "08:30",
    "toDate": "2024-01-01", 
    "toTime": "09:15",
    "duration": "45分钟"
  }
}
```

---

## 4. 技术架构设计

### 4.1 前端架构
- **框架：** React + TypeScript
- **UI风格：** 终端风格，深色主题
- **组件结构：**
  - Terminal (主终端界面)
  - ConversationArea (对话区域)
  - CommandInput (命令输入)
  - PersonalityDisplay (人格显示)
  - ASCIIArt (角色展示)

### 4.2 后端架构
- **平台：** Electron (桌面应用)
- **AI服务：** DeepSeek API
- **存储：** 本地JSON文件
- **服务模块：**
  - DeepSeekService (AI对话)
  - StorageService (数据存储)
  - PersonalityService (人格评估)

### 4.3 数据流
```
用户输入 → 前端验证 → 后端处理 → AI服务 → 人格评估 → 数据存储 → 前端更新
```

---

## 5. 用户体验设计

### 5.1 界面设计原则
- **极简主义：** 专注于对话内容
- **终端美学：** 复古终端风格
- **响应式：** 支持不同屏幕尺寸
- **无障碍：** 支持键盘导航

### 5.2 交互设计
- **命令输入：** 支持Tab补全
- **历史记录：** 上下箭头浏览
- **快捷键：** Ctrl+S保存，Ctrl+Q退出
- **实时反馈：** 输入状态、加载状态

### 5.3 视觉反馈
- **人格变化：** 颜色编码显示变化
- **技能命令：** 特殊高亮显示
- **选择按钮：** 清晰的A/B选项
- **ASCII艺术：** 角色状态可视化

---

## 6. AI对话设计

### 6.1 AI角色设定
- **身份：** 人生导师/陪伴者
- **语气：** 温暖、理解、引导性
- **风格：** 哲学思考 + 情感共鸣
- **目标：** 帮助用户自我认知和成长

### 6.2 对话生成策略
- **情境多样性：** 涵盖人生各个阶段
- **选择平衡：** A/B选项各有价值
- **情感深度：** 触及内心真实感受
- **成长导向：** 促进自我反思
- **时间推进：** 每次对话后时间自动流逝，AI需要考虑当前时间背景

### 6.3 技能命令触发逻辑
- **情境相关：** 根据对话内容决定
- **情感状态：** 基于当前情绪
- **人格特质：** 考虑用户性格倾向
- **随机性：** 保持游戏趣味性

### 6.4 时间推进机制
- **推进规则：** 每次对话后时间自动推进，推进时长根据对话内容决定
- **推进范围：** 从几分钟到几年不等，取决于对话的重要性和情境
- **时间背景：** AI在生成对话时必须考虑当前的时间日期
- **年龄同步：** 时间推进与角色年龄增长同步
- **历史背景：** 根据时间背景调整对话的时代特征和可能性 

## 结合界面草图的PRD补充建议

### 1. 界面区域划分（与草图对应）

- **左上角：日期与时间显示**
  - 实时显示当前游戏内的日期和时间，随剧情推进自动更新。
  - 建议：PRD中应明确"每次AI输出都需包含当前游戏时间，前端需高亮展示"。

- **左中：ASCII图像生成**
  - 用于展示当前角色或场景的ASCII艺术图像，随剧情和技能命令动态变化。
  - 建议：PRD中应补充"AI输出可包含ASCII图像描述，前端渲染"。

- **左下：人格五维进度条**
  - 五大人格（开放性、尽责性、外向性、亲和性、神经质）以进度条或数值条形式实时展示。
  - 建议：PRD中应明确"每次对话后，前端需同步刷新五大人格数值，支持动画过渡"。

- **左下角：扩展区**
  - 可作为后续功能扩展区（如成就、技能、历史等）。
  - 建议：PRD中可预留"扩展区"描述，便于未来功能拓展。

- **右侧：对话历史区**
  - 展示完整的AI与玩家对话历史，支持滚动查看。
  - 建议：PRD中应强调"对话内容需完整记录，支持回溯和导出"。

- **底部：输入框**
  - 支持命令、自然语言、Tab补全、快捷键。
  - 建议：PRD中应补充"输入框需支持命令高亮、快捷键、输入提示"。

### 2. 终端风格细节建议

- **配色与字体**：建议PRD中明确采用深色背景、绿色/琥珀色终端字体，等宽字体（如JetBrains Mono、Courier）。
- **动画与反馈**：输入、命令执行、人格变化等建议有打字机动画、进度条动态变化等终端特效。
- **无鼠标操作**：建议PRD中强调"全键盘操作友好"，支持快捷键切换区域、提交、撤销等。

### 3. PRD补充内容建议

#### 3.1 界面结构描述

```
<code_block_to_apply_changes_from>
- 顶部/左上：当前游戏内日期与时间（自动推进，AI每次输出需同步）
- 左中：ASCII图像区（AI可输出ASCII描述，前端渲染）
- 左下：人格五维进度条（每次对话后刷新，支持动画）
- 左下角：扩展区（预留成就、技能、历史等）
- 右侧：对话历史区（完整记录，支持滚动、导出）
- 底部：输入框（支持命令、自然语言、Tab补全、快捷键）
```

#### 3.2 交互流程补充

- 玩家输入后，AI输出需包含：
  - 当前时间与日期
  - 场景/角色ASCII图像（如有变化）
  - 对话内容
  - 技能命令（如有）
  - 人格变化（前端自动刷新进度条）

#### 3.3 技术细节补充

- **数据结构**：每条对话记录需包含时间戳、对话内容、人格变化、技能命令、ASCII图像描述等字段。
- **前端渲染**：ASCII图像区需支持多行文本、等宽字体、自动换行。
- **输入框**：支持命令/自然语言自动识别，命令高亮，历史回溯。

### 3. PRD补充内容建议

#### 3.1 界面结构描述

```
- 顶部/左上：当前游戏内日期与时间（自动推进，AI每次输出需同步）
- 左中：ASCII图像区（AI可输出ASCII描述，前端渲染）
- 左下：人格五维进度条（每次对话后刷新，支持动画）
- 左下角：扩展区（预留成就、技能、历史等）
- 右侧：对话历史区（完整记录，支持滚动、导出）
- 底部：输入框（支持命令、自然语言、Tab补全、快捷键）
```

#### 3.2 交互流程补充

- 玩家输入后，AI输出需包含：
  - 当前时间与日期
  - 场景/角色ASCII图像（如有变化）
  - 对话内容
  - 技能命令（如有）
  - 人格变化（前端自动刷新进度条）

#### 3.3 技术细节补充

- **数据结构**：每条对话记录需包含时间戳、对话内容、人格变化、技能命令、ASCII图像描述等字段。
- **前端渲染**：ASCII图像区需支持多行文本、等宽字体、自动换行。
- **输入框**：支持命令/自然语言自动识别，命令高亮，历史回溯。

---

## 结论

你的界面设计与PRD高度契合，只需在PRD中补充：
- 各区域的功能描述
- AI输出内容的结构要求
- 前端渲染和交互细节
- 未来扩展区的预留说明

如需，我可以直接帮你将这些内容补充进PRD文档。请确认是否需要我直接修改PRD，或有其他具体补充需求！ 